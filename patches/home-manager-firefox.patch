diff --git a/modules/programs/firefox/mkFirefoxModule.nix b/modules/programs/firefox/mkFirefoxModule.nix
index 8ef3f12d..35e1b0c4 100644
--- a/modules/programs/firefox/mkFirefoxModule.nix
+++ b/modules/programs/firefox/mkFirefoxModule.nix
@@ -74,7 +74,7 @@ let
     else
       builtins.toJSON pref);
 
-  mkUserJs = prefs: extraPrefs: bookmarks:
+  mkUserJs = prefs: extraPrefsEarly: extraPrefs: bookmarks:
     let
       prefs' = lib.optionalAttrs ([ ] != bookmarks) {
         "browser.bookmarks.file" = toString (browserBookmarksFile bookmarks);
@@ -83,6 +83,8 @@ let
     in ''
       // Generated by Home Manager.
 
+      ${extraPrefsEarly}
+
       ${concatStrings (mapAttrsToList (name: value: ''
         user_pref("${name}", ${userPrefValue value});
       '') prefs')}
@@ -405,6 +407,14 @@ in {
             '';
           };
 
+          extraConfigEarly = mkOption {
+            type = types.lines;
+            default = "";
+            description = ''
+              Like extraConfig, except lines are added to {file}`user.js` before all other configuration.
+            '';
+          };
+
           userChrome = mkOption {
             type = types.lines;
             default = "";
@@ -766,9 +776,10 @@ in {
         mkIf (profile.userContent != "") { text = profile.userContent; };
 
       "${profilesPath}/${profile.path}/user.js" = mkIf (profile.settings != { }
+        || profile.extraConfigEarly != ""
         || profile.extraConfig != "" || profile.bookmarks != [ ]) {
           text =
-            mkUserJs profile.settings profile.extraConfig profile.bookmarks;
+            mkUserJs profile.settings profile.extraConfigEarly profile.extraConfig profile.bookmarks;
         };
 
       "${profilesPath}/${profile.path}/containers.json" =
